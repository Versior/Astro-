---
import { menuLinks } from "@/site.config";
---
<header class="group relative mb-10 flex flex-col items-center w-full max-w-none px-4 sm:ps-[4.5rem] sm:pr-4" id="main-header">
	<!-- 移动端和桌面端：标题和导航菜单容器 -->
	<div class="flex flex-col items-center w-full pt-6 sm:pt-0">
		<!-- 标题 -->
		<a
			aria-current={Astro.url.pathname === "/" ? "page" : false}
			class="inline-flex items-center hover:filter-none mb-3 sm:mb-4"
			href="/"
		>
			<span class="text-xl sm:text-2xl font-bold flex items-center whitespace-nowrap">
				<span class="text-accent">VERSIOR</span> 
				<span class="text-base sm:text-lg font-medium">-离线崩溃日志</span>
			</span>
		</a>
		<!-- 导航菜单 -->
		<nav
			aria-label="Main menu"
			class="flex flex-row items-center gap-x-4 sm:gap-x-6 text-accent w-full justify-center"
			id="navigation-menu"
		>
			{
				menuLinks.map((link) => (
					<a
						aria-current={Astro.url.pathname === link.path ? "page" : false}
						class="text-base sm:text-lg font-medium py-2 sm:py-0 px-2 sm:px-3 underline-offset-2 hover:underline"
						data-astro-prefetch
						href={link.path}
					>
						{link.title}
					</a>
				))
			}
		</nav>
	</div> 
</header>
<script>
	import { toggleClass } from "@/utils/domElement";
	class MobileNavBtn extends HTMLElement {
		#menuOpen: boolean = false;
		connectedCallback() {
			const headerEl = document.getElementById("main-header")!;
			const mobileButtonEl = this.querySelector<HTMLButtonElement>("button");
			mobileButtonEl?.addEventListener("click", () => {
				if (headerEl) toggleClass(headerEl, "menu-open");
				this.#menuOpen = !this.#menuOpen;
				mobileButtonEl.setAttribute("aria-expanded", this.#menuOpen.toString());
			});
		}
	}
	customElements.define("mobile-button", MobileNavBtn);
</script>
