---
import { menuLinks } from "@/site.config";
---
<header class="w-full px-4 pt-0 pb-3 sm:pb-4 mb-8 shadow-sm">
  <div class="max-w-7xl mx-auto flex flex-col items-center">
    <a
      aria-current={Astro.url.pathname === "/" ? "page" : false}
      class="inline-flex items-center mt-0 mb-6 bg-accent/5 hover:bg-accent/10 border border-accent/15 rounded-lg px-6 py-3 transition-all duration-300 shadow-sm hover:shadow"
      href="/"
    >
      <span class="text-2xl sm:text-3xl font-bold flex items-center whitespace-nowrap">
        <span class="text-accent">VERSIOR</span> 
        <span class="mx-2 text-accent/60">|</span>
        <span class="text-lg sm:text-xl font-medium">离线崩溃日志</span>
      </span>
    </a>

    <nav aria-label="Main menu" class="flex flex-wrap justify-center gap-x-6 sm:gap-x-8">
      {
        menuLinks.map((link) => (
          <a
            key={link.path}
            aria-current={Astro.url.pathname === link.path ? "page" : false}
            class="text-base sm:text-lg font-medium px-3 py-2 rounded-md transition-all duration-200 hover:text-accent hover:bg-accent/5 hover:underline underline-offset-4"
            data-astro-prefetch
            href={link.path}
          >
            {link.title}
          </a>
        ))
      }
    </nav>
  </div>
</header>

<script>
	import { toggleClass } from "@/utils/domElement";
	class MobileNavBtn extends HTMLElement {
		#menuOpen: boolean = false;
		connectedCallback() {
			const headerEl = document.getElementById("main-header")!;
			const mobileButtonEl = this.querySelector<HTMLButtonElement>("button");
			mobileButtonEl?.addEventListener("click", () => {
				if (headerEl) toggleClass(headerEl, "menu-open");
				this.#menuOpen = !this.#menuOpen;
				mobileButtonEl.setAttribute("aria-expanded", this.#menuOpen.toString());
			});
		}
	}
	customElements.define("mobile-button", MobileNavBtn);
</script>
