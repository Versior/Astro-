---
import { menuLinks } from "@/site.config";
---
<!-- 
  1. 优化了整体布局和间距 (padding/margin)
  2. 移除了不必要的 `relative` 和 `group` 类
  3. 添加了 `w-full max-w-7xl mx-auto` 来限制最大宽度并居中
  4. 添加了 `shadow-sm` 增加了一点立体感
  5. 为了视觉效果，将 mb-10 (下方间距) 调整为 mb-8
-->
<header class="w-full px-4 py-6 sm:py-8 mb-8 shadow-sm">
  <div class="max-w-7xl mx-auto flex flex-col items-center">
    <!-- 
      标题区域 (Logo) - 核心优化点
      1. 添加了 `bg-accent/5` 创建一个非常浅的背景色，突出标题
      2. 添加了 `hover:bg-accent/10` 悬停时背景色加深，提供反馈
      3. 添加了 `border border-accent/15` 创建一个非常淡的边框
      4. 添加了 `rounded-lg` 圆角，使样式更现代
      5. 添加了 `px-6 py-3` 增加了内边距，让标题呼吸
      6. 添加了 `transition-all duration-300` 让所有悬停变化都平滑过渡
      7. 添加了 `shadow-sm hover:shadow` 悬停时增加阴影，提升层次感
      8. 调整了 `mb-6` (下方间距)，与导航菜单拉开距离
    -->
    <a
      aria-current={Astro.url.pathname === "/" ? "page" : false}
      class="inline-flex items-center mb-6 bg-accent/5 hover:bg-accent/10 border border-accent/15 rounded-lg px-6 py-3 transition-all duration-300 shadow-sm hover:shadow"
      href="/"
    >
      <span class="text-2xl sm:text-3xl font-bold flex items-center whitespace-nowrap">
        <span class="text-accent">VERSIOR</span> 
        <span class="mx-2 text-accent/60">|</span>
        <span class="text-lg sm:text-xl font-medium">离线崩溃日志</span>
      </span>
    </a>

    <!-- 
      导航菜单 - 优化点
      1. 移除了不必要的 `w-full justify-center`，因为父容器已经居中
      2. 调整了间距 `gap-x-6 sm:gap-x-8`
      3. 为链接添加了更精致的悬停效果
    -->
    <nav aria-label="Main menu" class="flex flex-wrap justify-center gap-x-6 sm:gap-x-8">
      {
        menuLinks.map((link) => (
          <a
            key={link.path}
            aria-current={Astro.url.pathname === link.path ? "page" : false}
            class="text-base sm:text-lg font-medium px-3 py-2 rounded-md transition-all duration-200 hover:text-accent hover:bg-accent/5 hover:underline underline-offset-4"
            data-astro-prefetch
            href={link.path}
          >
            {link.title}
          </a>
        ))
      }
    </nav>
  </div>
</header>

<!-- 移动端菜单按钮和脚本保持不变，因为我们没有修改这部分功能 -->
<script>
	import { toggleClass } from "@/utils/domElement";
	class MobileNavBtn extends HTMLElement {
		#menuOpen: boolean = false;
		connectedCallback() {
			const headerEl = document.getElementById("main-header")!;
			const mobileButtonEl = this.querySelector<HTMLButtonElement>("button");
			mobileButtonEl?.addEventListener("click", () => {
				if (headerEl) toggleClass(headerEl, "menu-open");
				this.#menuOpen = !this.#menuOpen;
				mobileButtonEl.setAttribute("aria-expanded", this.#menuOpen.toString());
			});
		}
	}
	customElements.define("mobile-button", MobileNavBtn);
</script>
